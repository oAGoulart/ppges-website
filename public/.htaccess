# Enable RewriteEngine
RewriteEngine On

# This may be necessary on some servers
RewriteBase /

# Redirect any www requests
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Remove trailing slash from files
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ ./$1 [R=301,L]

# Redirect .php requests to pretty urls
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ ./$1 [R=301,L]

# Redict pretty urls to proper .php files
RewriteRule ^([^/.]+)$ $1.php [L]

# Error handling
ErrorDocument 404 /error.php
