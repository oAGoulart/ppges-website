RewriteEngine on

RewriteCond %{HTTP_HOST} ^(.*)www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\/[a-zA-Z0-9\-\_\.]+/$ /$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)? HTTPS/
RewriteRule ^(.*)\/[a-zA-Z0-9\-\_\.]+.php$ /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)\/[a-zA-Z0-9\-\_\.]+$ /$1.php [L]

ErrorDocument 400 /error.php
ErrorDocument 401 /error.php
ErrorDocument 403 /error.php
ErrorDocument 404 /error.php
ErrorDocument 500 /error.php
ErrorDocument 502 /error.php
ErrorDocument 502 /error.php
ErrorDocument 504 /error.php
